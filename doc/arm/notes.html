<!--
 - 
 - This Source Code Form is subject to the terms of the Mozilla Public
 - License, v. 2.0. If a copy of the MPL was not distributed with this
 - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->
<!-- $Id$ -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title></title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article">

  <div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id-1.2"></a>Release Notes for BIND Version 9.11.3-S1</h2></div></div></div>
  
  <div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="relnotes_intro"></a>Introduction</h3></div></div></div>
    <p>
      This is a release of the BIND 9.11 Supported Preview Edition, a
      special feature preview branch of BIND which is available to ISC
      customers.
    </p>
    <p>
      This document summarizes significant changes since the last
      production release on the BIND 9.11 (Extended Support Version) branch.
      Please see the file CHANGES for a complete list of bug fixes and
      other changes, or CHANGES.SE for a list of changes that have been
      applied specifically to the Supported Preview edition.
    </p>
  </div>

  <div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="relnotes_download"></a>Download</h3></div></div></div>
    <p>
      The latest versions of BIND 9 software can always be found at
      <a class="link" href="http://www.isc.org/downloads/" target="_top">http://www.isc.org/downloads/</a>.
      There you will find additional information about each release,
      source code, and pre-compiled versions for Microsoft Windows
      operating systems.
    </p>
  </div>

  <div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="win_support"></a>Legacy Windows No Longer Supported</h3></div></div></div>
    <p>
      As of BIND 9.11.2, Windows XP and Windows 2003 are no longer supported
      platforms for BIND; "XP" binaries are no longer available for download
      from ISC.
    </p>
  </div>

  <div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="relnotes_security"></a>Security Fixes</h3></div></div></div>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
	<p>
	  An error in TSIG handling could permit unauthorized zone
	  transfers or zone updates. These flaws are disclosed in
	  CVE-2017-3142 and CVE-2017-3143. [RT #45383]
	</p>
      </li>
<li class="listitem">
	<p>
	  The BIND installer on Windows used an unquoted service path,
	  which can enable privilege escalation. This flaw is disclosed
	  in CVE-2017-3141. [RT #45229]
	</p>
      </li>
<li class="listitem">
	<p>
	  With certain RPZ configurations, a response with TTL 0
	  could cause <span class="command"><strong>named</strong></span> to go into an infinite
	  query loop. This flaw is disclosed in CVE-2017-3140.
	  [RT #45181]
	</p>
      </li>
<li class="listitem">
	<p>
	  Addresses could be referenced after being freed during resolver
	  processing, causing an assertion failure. The chances of this
	  happening were remote, but the introduction of a delay in
	  resolution increased them. This bug is disclosed in
	  CVE-2017-3145. [RT #46839]
	</p>
      </li>
<li class="listitem">
	<p>
	  update-policy rules that otherwise ignore the name field now
	  require that it be set to "." to ensure that any type list
	  present is properly interpreted.  If the name field was omitted
	  from the rule declaration and a type list was present it wouldn't
	  be interpreted as expected.
	</p>
      </li>
</ul></div>
  </div>

  <div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="relnotes_removed"></a>Removed Features</h3></div></div></div>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
	<p>
	  The ISC DNSSEC Lookaside Validation (DLV) service has
	  been shut down; all DLV records in the dlv.isc.org zone
	  have been removed.  References to the service have been
	  removed from BIND documentation.  Lookaside validation
	  is no longer used by default by <span class="command"><strong>delv</strong></span>.
	  The DLV key has been removed from <code class="filename">bind.keys</code>.
	  Setting <span class="command"><strong>dnssec-lookaside</strong></span> to
	  <span class="command"><strong>auto</strong></span> or to use dlv.isc.org as a trust
	  anchor results in a warning being issued.
	</p>
      </li>
<li class="listitem">
	<p>
	  <span class="command"><strong>named</strong></span> will now log a warning if the old
	  root DNSSEC key is explicitly configured and has not been updated.
	  [RT #43670]
	</p>
      </li>
</ul></div>
  </div>

  <div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="proto_changes"></a>Protocol Changes</h3></div></div></div>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
	<p>
	  BIND can now use the Ed25519 and Ed448 Edwards Curve DNSSEC
	  signing algorithms described in RFC 8080. Note, however, that
	  these algorithms must be supported in OpenSSL;
	  currently they are only available in the development branch
	  of OpenSSL at
	  <a class="link" href="https://github.com/openssl/openssl" target="_top">
	    https://github.com/openssl/openssl</a>.
	  [RT #44696]
	</p>
      </li>
<li class="listitem">
	<p>
	  When parsing DNS messages, EDNS KEY TAG options are checked
	  for correctness. When printing messages (for example, in
	  <span class="command"><strong>dig</strong></span>), EDNS KEY TAG options are printed
	  in readable format.
	</p>
      </li>
<li class="listitem">
	<p>
	  <span class="command"><strong>rndc reload</strong></span> could cause <span class="command"><strong>named</strong></span>
	  to leak memory if it was invoked before the zone loading actions
	  from a previous <span class="command"><strong>rndc reload</strong></span> command were
	  completed. [RT #47076]
	</p>
      </li>
<li class="listitem">
	<p>
	  Query logging now includes the ECS option, if one was
	  present in the query, in the format
	  "[ECS <em class="replaceable"><code>address/source/scope</code></em>]".
	</p>
      </li>
</ul></div>
  </div>

  <div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="relnotes_features"></a>New Features</h3></div></div></div>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
	<p>
	  This release introduces support for the EDNS CLIENT-SUBNET (ECS)
	  option in recursive servers.
	</p>
	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
	    ECS options are generated when sending recursive
	    queries to zones listed in <code class="option">ecs-zones</code>.
	  </li>
<li class="listitem">
	    ECS options from the client are forwarded when sending queries
	    to whitelisted domains if the client is in allowed by the
	    <code class="option">ecs-forward</code> ACL, or when the source prefix
	    length is 0
	  </li>
<li class="listitem">
	    ECS options are never sent for DNS infrastructure types (i.e.,
	    NS, SOA, DNSKEY, etc) as these are presumed to be of global
	    scope. ECS queries can be further restricted to a specific set
	    of query types by using the <code class="option">ecs-types</code> option.
	  </li>
<li class="listitem">
	    ECS options are sent using a default source prefix length of 24
	    for IPv4 queries and 56 for IPv6 queries. These defaults can be
	    reduced to lower values by using <code class="option">ecs-bits</code>, or
	    on a per-domain basis in the <code class="option">ecs-zones</code> option.
	  </li>
<li class="listitem">
	    Servers that do not support ECS can be blacklisted using
	    <span class="command"><strong>server IPADDR { ecs no; };</strong></span>
	  </li>
<li class="listitem">
	    The dns_db API and the red-black tree database implementation
	    have been updated to allow storage and retrieval of data tagged
	    with ECS information.
	  </li>
</ul></div>
	<p>
	  See the ARM for more details of these options.
	</p>
      </li>
<li class="listitem">
	<p>
	  The EDNS CLIENT SUBNET (ECS) option is also experimentally
	  supported for authoritative servers: if an authoritative
	  query contains an ECS option, then ACLs containing
	  <code class="option">geoip</code> or <code class="option">ecs</code> elements
	  can be matched against the address or prefix encoded in the
	  option.  This can be used to select a view for the query,
	  so that different answers can be provided depending on the
	  client network.  Note, however, that this authoritative
	  support is based on an outdated version of the ECS specification;
	  in its current form it may be useful for testing, but is
	  not recommended for production use. Thanks to Vincent Bernat
	  for the contribution. [RT #36781]
	</p>
      </li>
<li class="listitem">
	<p>
	  Added support for the EDNS TCP Keepalive option (RFC 7828);
	  this allows negotiation of longer-lived TCP sessions
	  to reduce the overhead of setting up TCP for individual
	  queries. [RT #42126]
	</p>
      </li>
<li class="listitem">
	<p>
	  Added support for the EDNS Padding option (RFC 7830),
	  which obfuscates packet size analysis when DNS queries
	  are sent over an encrypted channel. [RT #42094]
	</p>
      </li>
<li class="listitem">
	<p>
	  <span class="command"><strong>dnstap</strong></span> logfiles can now be configured to
	  automatically roll when they reach a specified size. If
	  <span class="command"><strong>dnstap-output</strong></span> is configured with mode
	  <code class="literal">file</code>, then it can take optional
	  <span class="command"><strong>size</strong></span> and <span class="command"><strong>versions</strong></span>
	  key-value arguments to set the logfile rolling parameters.
	  (These have the same semantics as the corresponding
	  options in a <span class="command"><strong>logging</strong></span> channel statement.)
	  [RT #44502]
	</p>
      </li>
<li class="listitem">
	<p>
	  The <code class="option">print-time</code> option in the
	  <code class="option">logging</code> configuration can now take arguments
	  <span class="command"><strong>local</strong></span>, <span class="command"><strong>iso8601</strong></span> or
	  <span class="command"><strong>iso8601-utc</strong></span> to indicate the format in
	  which the date and time should be logged. For backward
	  compatibility, <span class="command"><strong>yes</strong></span> is a synonym for
	  <span class="command"><strong>local</strong></span>.  [RT #42585]
	</p>
      </li>
<li class="listitem">
	<p>
	  New classification options have been added for response rate
	  limiting (RRL):
	</p>
	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
	    Multiple <code class="option">rate-limit</code> statements can now be
	    configured, each defined by a specific <code class="option">domain</code>.
	    This allows different rate limiting options to be applied for
	    different namespaces.
	  </li>
<li class="listitem">
	    Each rate limiter may be configured with up to five
	    <code class="option">responses-per-second</code> options, with the
	    value selected depending on the size of the response or
	    the ratio of the response size to the query size (i.e.,
	    the amplification factor). For example, responses could
	    rate limited to 10 per second in general, but only 2 per
	    second for responses larger than 1100 bytes.
	  </li>
</ul></div>
      </li>
</ul></div>
  </div>

  <div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="relnotes_changes"></a>Feature Changes</h3></div></div></div>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
	<p>
	  <span class="command"><strong>named</strong></span> will no longer start or accept
	  reconfiguration if <span class="command"><strong>managed-keys</strong></span> or
	  <span class="command"><strong>dnssec-validation auto</strong></span> are in use and
	  the managed-keys directory (specified by
	  <span class="command"><strong>managed-keys-directory</strong></span>, and defaulting
	  to the working directory if not specified),
	  is not writable by the effective user ID. [RT #46077]
	</p>
      </li>
<li class="listitem">
	<p>
	  The Response Policy Zone (RPZ) implementation has been
	  substantially refactored: updates to the RPZ summary
	  database are no longer directly performed by the zone
	  database but by a separate function that is called when
	  a policy zone is updated.  This improves both performance
	  and reliability when policy zones receive frequent updates.
	  Summary database updates can be rate-limited by using the
	  <span class="command"><strong>min-update-interval</strong></span> option in a
	  <span class="command"><strong>response-policy</strong></span> statement. [RT #43449]
	</p>
      </li>
<li class="listitem">
	<p>
	  Previously, <span class="command"><strong>update-policy local;</strong></span> accepted
	  updates from any source so long as they were signed by the
	  locally-generated session key. This has been further restricted;
	  updates are now only accepted from locally configured addresses.
	  [RT #45492]
	</p>
      </li>
<li class="listitem">
	<p>
	  <span class="command"><strong>dig +ednsopt</strong></span> now accepts the names
	  for EDNS options in addition to numeric values. For example,
	  an EDNS Client-Subnet option could be sent using
	  <span class="command"><strong>dig +ednsopt=ecs:...</strong></span>. Thanks to
	  John Worley of Secure64 for the contribution. [RT #44461]
	</p>
      </li>
<li class="listitem">
	<p>
	  Threads in <span class="command"><strong>named</strong></span> are now set to human-readable
	  names to assist debugging on operating systems that support that.
	  Threads will have names such as "isc-timer", "isc-sockmgr",
	  "isc-worker0001", and so on. This will affect the reporting of
	  subsidiary thread names in <span class="command"><strong>ps</strong></span> and
	  <span class="command"><strong>top</strong></span>, but not the main thread. [RT #43234]
	</p>
      </li>
<li class="listitem">
	<p>
	  DiG now warns about .local queries which are reserved for
	  Multicast DNS. [RT #44783]
	</p>
      </li>
</ul></div>
  </div>

  <div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="relnotes_bugs"></a>Bug Fixes</h3></div></div></div>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
	<p>
	  Attempting to validate improperly unsigned CNAME responses
	  from secure zones could cause a validator loop. This caused
	  a delay in returning SERVFAIL and also increased the chances
	  of encountering the crash bug described in CVE-2017-3145.
	  [RT #46839]
	</p>
      </li>
<li class="listitem">
	<p>
	  When <span class="command"><strong>named</strong></span> was reconfigured, failure of some
	  zones to load correctly could leave the system in an inconsistent
	  state; while generally harmless, this could lead to a crash later
	  when using <span class="command"><strong>rndc addzone</strong></span>.  Reconfiguration changes
	  are now fully rolled back in the event of failure. [RT #45841]
	</p>
      </li>
<li class="listitem">
	<p>
	  Fixed a bug that was introduced in an earlier development
	  release which caused multi-packet AXFR and IXFR messages to fail
	  validation if not all packets contained TSIG records; this
	  caused interoperability problems with some other DNS
	  implementations. [RT #45509]
	</p>
      </li>
<li class="listitem">
	<p>
	  Reloading or reconfiguring <span class="command"><strong>named</strong></span> could
	  fail on some platforms when LMDB was in use. [RT #45203]
	</p>
      </li>
<li class="listitem">
	<p>
	  Due to some incorrectly deleted code, when BIND was
	  built with LMDB, zones that were deleted via
	  <span class="command"><strong>rndc delzone</strong></span> were removed from the
	  running server but were not removed from the new zone
	  database, so that deletion did not persist after a
	  server restart. This has been corrected. [RT #45185]
	</p>
      </li>
<li class="listitem">
	<p>
	  Semicolons are no longer escaped when printing CAA and
	  URI records.  This may break applications that depend on the
	  presence of the backslash before the semicolon. [RT #45216]
	</p>
      </li>
<li class="listitem">
	<p>
	  AD could be set on truncated answer with no records present
	  in the answer and authority sections. [RT #45140]
	</p>
      </li>
<li class="listitem">
	<p>
	  Some header files included &lt;isc/util.h&gt; incorrectly as
	  it pollutes with namespace with non ISC_ macros and this should
	  only be done by explicitly including &lt;isc/util.h&gt;.  This
	  has been corrected.  Some code may depend on &lt;isc/util.h&gt;
	  being implicitly included via other header files.  Such
	  code should explicitly include &lt;isc/util.h&gt;.
	</p>
      </li>
<li class="listitem">
	<p>
	  Zones created with <span class="command"><strong>rndc addzone</strong></span> could
	  temporarily fail to inherit the <span class="command"><strong>allow-transfer</strong></span>
	  ACL set in the <span class="command"><strong>options</strong></span> section of
	  <code class="filename">named.conf</code>. [RT #46603]
	</p>
      </li>
<li class="listitem">
	<p>
	  <span class="command"><strong>named</strong></span> failed to properly determine whether
	  there were active KSK and ZSK keys for an algorithm when
	  <span class="command"><strong>update-check-ksk</strong></span> was true (which is the
	  default setting). This could leave records unsigned
	  when rolling keys. [RT #46743] [RT #46754] [RT #46774]
	</p>
      </li>
</ul></div>
  </div>

  <div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="end_of_life"></a>End of Life</h3></div></div></div>
    <p>
      BIND 9.11 (Extended Support Version) will be supported until at
      least December, 2021.
      BIND 9.11-S (Supported Preview Edition) releases will continue to
      be published in tandem with BIND 9.11 releases until the Supported
      Preview Edition moves to a new branch. This may happen before BIND 9.11
      reaches end of life, but not later. See
      <a class="link" href="https://www.isc.org/downloads/software-support-policy/" target="_top">https://www.isc.org/downloads/software-support-policy/</a> for details of ISC's software support policy.
    </p>
  </div>
  <div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="relnotes_thanks"></a>Thank You</h3></div></div></div>

    <p>
      Thank you to everyone who assisted us in making this release possible.
      If you would like to contribute to ISC to assist us in continuing to
      make quality open source software, please visit our donations page at
      <a class="link" href="http://www.isc.org/donate/" target="_top">http://www.isc.org/donate/</a>.
    </p>
  </div>
</div>
</div></body>
</html>
